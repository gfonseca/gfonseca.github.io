<!doctype html>
<html lang="pt" itemscope itemtype="http://schema.org/Person">
<head>
  <meta charset="utf-8">
  <!-- Site Meta Data -->
  <title>Make VS New</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="Georgio Barbosa da Fonseca">

  <link rel="shortcut icon" href="">
  <link rel="stylesheet" title="Dracula" href="https://highlightjs.org/static/demo/styles/solarized-dark.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>
    $(document.body).ready(function() {
        $('pre').each(function(i, block) {
            hljs.highlightBlock(block);
        });
    });
  </script>
  <!-- schema.org -->
  <meta itemprop="name" content="Code Militia">
  <meta itemprop="image" content="">
  <meta itemprop="description" content="">

  <!-- Style Meta Data -->
  <link rel="stylesheet" href="https://gfonseca.github.io/theme/css/milligram.css" type="text/css" />
  <link rel="stylesheet" href="https://gfonseca.github.io/theme/css/custom.css" type="text/css" />

  <!-- Feed Meta Data -->
    <link href="https://gfonseca.github.io/atom.xml" type="application/atom+xml" rel="alternate" title="Code Militia ATOM Feed" />

  <!-- Twitter Feed -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="">
  <meta name="twitter:image" content="">

<meta name="twitter:creator" content="">
<meta name="twitter:url" content="https://gfonseca.github.io/make-vs-new.html">
<meta name="twitter:title" content="Code Militia ~ Make VS New">
<meta name="twitter:description" content="Make() vs New() Este post será breve, trata se de uma explicação das funções embutidas make() e new(). New A função embutida new aloca espaço na memória para um determinado tipo, e retorna um ponteiro para este endereço recém alocado var i *int i = new(int) fmt.Printf(“&gt; %d”, *i …">

<!-- Facebook Meta Data -->
<meta property="og:title" content="Code Militia ~ Make VS New" />
<meta property="og:description" content="Make() vs New() Este post será breve, trata se de uma explicação das funções embutidas make() e new(). New A função embutida new aloca espaço na memória para um determinado tipo, e retorna um ponteiro para este endereço recém alocado var i *int i = new(int) fmt.Printf(“&gt; %d”, *i …" />
<meta property="og:image" content="" />
</head>

<body class="crt">
    <div class="container">

    <!-- Navbar -->
      <div class="navbar">
        <ul>
            <div>
                <li>
                    <a href="https://gfonseca.github.io"><h1>Code Militia</h1></a>
                </li>
                <li>
                </li>
            </div>
        </ul>
      </div>

  <!-- Sidebar -->
    <sidebar>
        <ul class="static-item">

        </ul>        

        <ul>
                <div class="cat-border">
                <li style="color: #F2F1EF; background-color: #6C7A89;">Categories</li>
                    <li><a href="https://gfonseca.github.io/category/golang.html">golang</a></li>
                </div>
        </ul>

   
        <p> 
        </p>
        <p>
            <a href="https://gfonseca.github.io/atom.xml" rel="alternate">
                <img class="social-icons-m" src="https://gfonseca.github.io/theme/images/icons/rss.png"></a>
        </p>
        <p>
        </p>
    </sidebar>
    
    <maincontent>
<h2>
    <a href="https://gfonseca.github.io/make-vs-new.html" rel="bookmark" title="Permalink to Make VS New">Make VS New</a>
</h2>

<div>
    <b>By: </b><a href="https://gfonseca.github.io/author/georgio-barbosa-da-fonseca.html">Georgio Barbosa da Fonseca</a><b>    On: </b>Sun 05 November 2017<br />
    <b>In: </b><a href="https://gfonseca.github.io/category/golang.html" rel="bookmark" title="Permalink to golang">golang</a><br />
    <em><b>Tags: </b>
    </em>
    <hr>
</div>

<div>
    <mainarticle>
    <h1>Make() vs New()</h1>
<p>Este post será breve, trata se de uma explicação das funções embutidas <strong>make</strong>() e <strong>new</strong>().</p>
<h2>New</h2>
<p>A função embutida <strong><a href="https://golang.org/pkg/builtin/#new">new</a></strong> aloca espaço na memória para um determinado tipo, e retorna um ponteiro para este endereço recém alocado</p>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">i</span> <span class="o">*</span><span class="kt">int</span>
<span class="nx">i</span> <span class="p">=</span> <span class="nb">new</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span>

<span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="err">“</span><span class="p">&gt;</span> <span class="o">%</span><span class="nx">d</span><span class="err">”</span><span class="p">,</span> <span class="o">*</span><span class="nx">i</span><span class="p">)</span>
</pre></div>


<p>Note que a nossa posição de memória já está inicializada com o seu respectivo <em><a href="https://tour.golang.org/basics/12">zerovalue</a></em>, no caso 0, mas isto será abordado em outro post.</p>
<h2>Make</h2>
<p>A função <strong><a href="https://golang.org/pkg/builtin/#make">make</a></strong> funciona apenas para as primitivas slice, chanel e map, esses tipos em especial não podem ser apenas alocados, eles também precisam ser inicializados, com valores específicos.
Segundo o documento oficial <a href="https://golang.org/doc/effective_go.html#allocation_make">Effective GO</a> estes tipos, são na verdade estruturas de dados que precisam ter seus campos preenchidos com os devidos valores. No caso do tipo slice por exemplo, trata se de uma estrutura com os campos, data (referência para um array), tamanho e capacidade. Diferente da função <strong>new</strong> a função <strong>make</strong> não retorna um ponteiro, mas sim um valor.</p>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">s</span> <span class="p">[]</span><span class="kt">int</span> <span class="p">=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">int</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nx">Prinln</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
</pre></div>


<h2>Declaração ilegal</h2>
<div class="highlight"><pre><span></span><span class="nx">d</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span>
</pre></div>


<p><strong>Saída</strong></p>
<div class="highlight"><pre><span></span>code/make-vs-new.go:16: cannot make type int
</pre></div>


<h2>Finalizando &#128123;</h2>
<p>Apesar da ambiguidade que os termos make e new podem gerar, essas duas funções tem propósitos totalmente diferente. A função <strong>new</strong> realiza alocação de memória de forma similar a função maloc da linguagem C, enquanto a função <strong>make</strong> tem o propósito de inicializar primitivas especiais da linguagem.</p>
<p>Até a próxima &#128640;</p>
    </mainarticle>
</div>
<hr>
        
<div>
        <i>If you found the article helpful, please share or cite the article, and spread the word:</i>
            <p style="margin-top: 2%;">
                <span><a target="_blank" rel="nofollow" onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=400,width=700');return false;" title="Twitter" href="https://twitter.com/share?url=https://gfonseca.github.io/make-vs-new.html&text=Make VS New&via="><img class="social-icons-a" src="https://gfonseca.github.io/theme/images/icons/twitter.png"></a></span>
                <span><a target="_blank" title="Facebook" rel="nofollow" onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=500,width=700');return false;" href="https://www.facebook.com/sharer.php?u=https://gfonseca.github.io/make-vs-new.html&t=Make VS New"><img class="social-icons-a" src="https://gfonseca.github.io/theme/images/icons/facebook.png"></a></span>

                <a  target="_blank" title="Linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https://gfonseca.github.io/make-vs-new.html&title=Make VS New" rel="nofollow" onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=650');return false;"><img class="social-icons-a" src="https://gfonseca.github.io/theme/images/icons/linkedin.png"></a>
            </p>
</div>
<hr>
    <p><i>For any feedback or corrections, please write in to: </i><b> georgio.barbosa@gmail.com </b></p>
        
    </maincontent>

  <!-- Analytics -->

  </div>
</body>

</html>